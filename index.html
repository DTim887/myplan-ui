<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºèƒ½æ—…æ¸¸åŠ©æ‰‹</title>
    <link rel="stylesheet" href="style.css">
    <!-- å¼•å…¥marked.jsç”¨äºmarkdownè§£æ -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- å¼•å…¥ç”¨æˆ·ç®¡ç†js -->
    <script src="user.js"></script>
    <!-- å¼•å…¥é…ç½®æ–‡ä»¶ -->
    <script src="config.js"></script>
</head>

<body>
    <div class="main-container">
        <!-- å·¦ä¾§ç”¨æˆ·ä¿¡æ¯æ  -->
        <div class="left-panel">
            <div class="user-profile">
                <div class="switch-user-container">
                    <button id="switchUserBtn" class="switch-user-btn">åˆ‡æ¢ç”¨æˆ·</button>
                </div>
                <div class="user-info">
                    <div class="user-avatar">
                        <img id="userAvatar" src="https://via.placeholder.com/60x60/4e6ef2/ffffff?text=U" alt="ç”¨æˆ·å¤´åƒ">
                    </div>
                    <div class="user-details">
                        <div class="user-name" id="userName">è®¿å®¢ç”¨æˆ·</div>
                        <div class="user-sex" id="userSex"></div>
                        <div class="user-tags" id="userTags">
                            <!-- ç”¨æˆ·æ ‡ç­¾å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- åˆ‡æ¢ç”¨æˆ·æ¨¡æ€æ¡† -->
            <div id="switchUserModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>åˆ‡æ¢ç”¨æˆ·</h3>
                        <span class="close">&times;</span>
                    </div>
                    <div class="modal-body">
                        <div class="user-list" id="userList">
                            <!-- ç”¨æˆ·åˆ—è¡¨å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- ç¡®è®¤æ¨¡æ€æ¡† -->
            <div id="confirmModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>ç¡®è®¤åˆ‡æ¢</h3>
                    </div>
                    <div class="modal-body">
                        <p>ç¡®å®šè¦åˆ‡æ¢åˆ°ç”¨æˆ· <span id="confirmUserName"></span> å—ï¼Ÿ</p>
                    </div>
                    <div class="modal-footer">
                        <button id="confirmCancelBtn" class="btn-secondary">å–æ¶ˆ</button>
                        <button id="confirmSwitchBtn" class="btn-primary">ç¡®è®¤</button>
                    </div>
                </div>
            </div>

            <div class="user-info-section">
                <h3>æˆ‘çš„ä¿¡æ¯</h3>
                <div class="info-item">
                    <span class="info-label">æˆ‘çš„è®¢å•:</span>
                    <span class="info-value" id="orderCount" style="cursor: pointer; text-decoration: underline;">0</span>
                </div>
                <div class="info-item">
                    <span class="info-label">æˆ‘çš„è¡Œç¨‹:</span>
                    <span class="info-value">0</span>
                </div>
            </div>

            <div class="quick-navigation">
                <h3>å¿«é€Ÿå¯¼èˆª</h3>
                <ul class="links-list">
                    <li><a href="attractions.html" target="browser-frame">æ™¯ç‚¹åˆ—è¡¨</a></li>
                    <li><a href="products.html" target="browser-frame">äº§å“åˆ—è¡¨</a></li>
                </ul>
            </div>
        </div>

        <!-- ä¸­é—´èŠå¤©çª—å£ -->
        <div class="center-panel">
            <div class="chat-container">
                <!-- å½“å‰åŠ©æ‰‹ä¿¡æ¯æ˜¾ç¤ºåŒºåŸŸ -->
                <div class="assistant-info-bar">
                    <div class="assistant-avatar">
                        <img id="assistantAvatar" src="https://via.placeholder.com/40x40/4e6ef2/ffffff?text=A" alt="åŠ©æ‰‹å¤´åƒ">
                    </div>
                    <div class="assistant-details">
                        <div class="assistant-name" id="assistantName">æ™ºèƒ½åŠ©æ‰‹</div>
                        <div class="assistant-description" id="assistantDescription">æ‚¨çš„æ™ºèƒ½AIåŠ©æ‰‹</div>
                    </div>
                    <div class="switch-assistant-container">
                        <button id="switchAssistantBtn" class="switch-assistant-btn">åˆ‡æ¢åŠ©æ‰‹</button>
                    </div>
                </div>
                <div class="chat-messages" id="chatMessages">
                    <!-- æ¶ˆæ¯å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                </div>
                <div class="chat-input-container">
                    <textarea id="messageInput" placeholder="è¾“å…¥æ¶ˆæ¯..." rows="3"></textarea>
                    <div class="input-buttons">
                        <button id="voiceButton" class="voice-button">ğŸ¤</button>
                        <button id="sendButton">å‘é€</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- å³ä¾§æµè§ˆå™¨ -->
        <div class="right-panel">
            <div class="browser-header">
                <h3>å†…ç½®æµè§ˆå™¨</h3>
            </div>
            <iframe src="about:blank" name="browser-frame" class="browser-frame" frameborder="0">
            </iframe>
        </div>
    </div>

    <!-- åŠ©æ‰‹åˆ—è¡¨æ¨¡æ€æ¡† -->
    <div id="assistantListModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>é€‰æ‹©åŠ©æ‰‹</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="assistant-list" id="assistantList">
                    <!-- åŠ©æ‰‹åˆ—è¡¨å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // åœ¨ ChatApp åˆå§‹åŒ–åè®¾ç½® UserManager å’Œ ChatApp ä¹‹é—´çš„å¼•ç”¨
        document.addEventListener('DOMContentLoaded', () => {
            // ç¡®ä¿ä¸¤ä¸ªå¯¹è±¡éƒ½å·²åˆå§‹åŒ–
            if (typeof window.userManager !== 'undefined' && typeof window.chatApp !== 'undefined') {
                window.userManager.setChatApp(window.chatApp);
            }
        });
    </script>
</body>

</html>